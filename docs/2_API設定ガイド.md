# API設定ガイド

このガイドでは、AI機能を使うための設定方法を説明します。

---

## AI機能とは？

Slidecast Pipelineには、以下のAI機能があります：

| 機能 | 説明 | 必要なAPI |
|------|------|-----------|
| AI自動マーカー生成 | スライドと音声を分析して、切り替えタイミングを自動で提案 | OpenAI + Gemini |
| 概要欄の自動生成 | 動画の説明文を自動で作成 | OpenAI |
| キーポイント抽出 | 動画の要点を箇条書きで作成 | OpenAI |
| クイズ生成 | 動画の内容に関するクイズを自動作成 | OpenAI |

これらの機能を使うには、「APIキー」という認証情報が必要です。

**注意**: APIキーの取得（アカウント作成）はMakotoが行います。
このガイドでは、受け取ったAPIキーの設定方法を説明します。

---

## 目次

1. [設定ファイルを開く](#1-設定ファイルを開く)
2. [APIキーを入力する](#2-apiキーを入力する)
3. [設定を保存する](#3-設定を保存する)
4. [設定が正しいか確認する](#4-設定が正しいか確認する)

---

## 1. 設定ファイルを開く

### このステップの目的

APIキーを保存するための設定ファイルを、メモ帳で開きます。

### 手順

1. **slidecast-pipelineフォルダを開きます**

   セットアップ時に展開したフォルダを開いてください。

   例: `C:\slidecast-pipeline`

2. **`.env.example` ファイルを探します**

   フォルダの中に `.env.example` というファイルがあります。

   **注意**: ファイル名の先頭に「.（ドット）」が付いています。

   <!-- TODO: スクリーンショット - .env.exampleファイルの位置 -->

   **ファイルが見つからない場合:**

   Windowsの設定で、隠しファイルが表示されていない可能性があります。
   以下の手順で表示させてください：

   1. エクスプローラーの上部メニューで「表示」をクリック
   2. 「表示」→「隠しファイル」にチェックを入れる

   <!-- TODO: スクリーンショット - 隠しファイルの表示設定 -->

3. **`.env.example` をコピーして `.env` を作成します**

   1. `.env.example` ファイルを右クリック
   2. 「コピー」をクリック
   3. フォルダ内の空白部分を右クリック
   4. 「貼り付け」をクリック
   5. 新しくできた「.env.example - コピー」を右クリック
   6. 「名前の変更」をクリック
   7. ファイル名を `.env` に変更してEnterキーを押す

   <!-- TODO: スクリーンショット - ファイル名変更の手順 -->

   **「拡張子を変更すると〜」と警告が出た場合:**

   「はい」をクリックして続行してください。

4. **`.env` ファイルを右クリックします**

5. **「プログラムから開く」→「メモ帳」をクリックします**

   <!-- TODO: スクリーンショット - メモ帳で開く -->

   メモ帳が開き、以下のような内容が表示されます：

   ```
   # OpenAI API Key
   # Get your key from: https://platform.openai.com/api-keys
   OPENAI_API_KEY=sk-xxxxxxxxxxxxxxxxxxxx

   # Gemini API Key (for PDF summarization)
   # Get your key from: https://aistudio.google.com/apikey
   GEMINI_API_KEY=
   ```

---

## 2. APIキーを入力する

### このステップの目的

Makotoから受け取ったAPIキーを、設定ファイルに入力します。

### APIキーとは？

APIキーは、AIサービスを利用するための「鍵」のようなものです。
この鍵がないと、AIサービスにアクセスできません。

**重要**: APIキーは**絶対に他人に教えないでください**。
APIキーが漏れると、他人に勝手に使われて料金が発生する可能性があります。

### 手順

1. **Makotoから以下の2つのAPIキーを受け取ります**

   - OpenAI APIキー（`sk-` で始まる長い文字列）
   - Gemini APIキー（`AIza` で始まる長い文字列）

2. **OpenAI APIキーを入力します**

   メモ帳で開いたファイルの中で、以下の行を探します：

   ```
   OPENAI_API_KEY=sk-xxxxxxxxxxxxxxxxxxxx
   ```

   `sk-xxxxxxxxxxxxxxxxxxxx` の部分を、受け取ったOpenAI APIキーに書き換えます。

   **書き換え前:**
   ```
   OPENAI_API_KEY=sk-xxxxxxxxxxxxxxxxxxxx
   ```

   **書き換え後の例:**
   ```
   OPENAI_API_KEY=sk-proj-abc123def456ghi789jkl012mno345pqr678stu901vwx234yz
   ```

   **注意点:**
   - `OPENAI_API_KEY=` の後に、スペースを入れないでください
   - APIキーの前後にスペースや改行を入れないでください

3. **Gemini APIキーを入力します**

   同じファイルの中で、以下の行を探します：

   ```
   GEMINI_API_KEY=
   ```

   `=` の後に、受け取ったGemini APIキーを入力します。

   **書き換え前:**
   ```
   GEMINI_API_KEY=
   ```

   **書き換え後の例:**
   ```
   GEMINI_API_KEY=AIzaSyAbCdEfGhIjKlMnOpQrStUvWxYz1234567
   ```

### 入力後のファイル全体の例

```
# OpenAI API Key
# Get your key from: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-proj-abc123def456ghi789jkl012mno345pqr678stu901vwx234yz

# Gemini API Key (for PDF summarization)
# Get your key from: https://aistudio.google.com/apikey
GEMINI_API_KEY=AIzaSyAbCdEfGhIjKlMnOpQrStUvWxYz1234567
```

---

## 3. 設定を保存する

### このステップの目的

入力したAPIキーを保存します。

### 手順

1. **メモ帳のメニューで「ファイル」をクリックします**

2. **「保存」をクリックします**

   または、キーボードで `Ctrl` キーを押しながら `S` キーを押しても保存できます。

   <!-- TODO: スクリーンショット - メモ帳の保存メニュー -->

3. **メモ帳を閉じます**

   右上の「×」ボタンをクリックして閉じます。

---

## 4. 設定が正しいか確認する

### このステップの目的

入力したAPIキーが正しく設定されているか確認します。

### 手順

1. **アプリを起動します**

   `start.bat` をダブルクリックします。

2. **ブラウザでアプリが開くのを待ちます**

3. **テスト用のPDFと音声ファイルをアップロードします**

   （ファイルの用意がない場合は、Makotoに確認してください）

4. **AI機能を試します**

   - PDFをアップロードすると、自動でPDF分析が始まります
   - 「分析完了」と表示されれば、Gemini APIは正常です

   - 音声をアップロードすると、自動で文字起こしが始まります
   - 「文字起こし完了」と表示されれば、OpenAI APIは正常です

### うまくいかない場合

#### 「APIキーが無効です」というエラーが出る場合

- APIキーの入力にミスがないか確認してください
- コピー＆ペーストする際に、余分なスペースが入っていないか確認してください

#### AI機能が動かない場合

- `.env` ファイルが正しい場所（slidecast-pipelineフォルダ直下）にあるか確認してください
- アプリを再起動してみてください（`start.bat` を閉じて、もう一度開く）

それでも解決しない場合は、Makotoに連絡してください。

---

## 次のステップ

API設定が完了したら、次は「使い方ガイド」をお読みください。

→ [3_使い方ガイド.md](3_使い方ガイド.md) に進んでください

---

## よくある質問

### Q: APIキーは毎回入力する必要がありますか？

いいえ、**最初の1回だけ**で大丈夫です。
一度設定すれば、次回以降は自動で読み込まれます。

### Q: APIキーを変更したい場合は？

同じ手順で `.env` ファイルを開いて、APIキーを書き換えてください。
書き換えた後は、アプリを再起動してください。

### Q: AI機能を使わない場合は設定が必要ですか？

いいえ、AI機能を使わない場合は設定不要です。
マーカーを手動で設定して動画を作成する機能は、APIキーがなくても使えます。
